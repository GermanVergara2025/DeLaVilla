<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Productos</title>
<style>
body {
  font-family: "Segoe UI", sans-serif;
  background-color: #fafaf3;
  color: #3b3b2f;
  margin: 0;
  padding: 0 60px;
}
h1 {
  font-size: 48px;
  margin: 40px 0 20px;
  color: #2f3b28;
}
.filters {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 30px;
}
.filters-left, .filters-right {
  display: flex;
  align-items: center;
  gap: 20px;
}
.dropdown {
  position: relative;
}
.dropdown button {
  background: none;
  border: 1px solid transparent;
  font-size: 17px;
  color: #3b3b2f;
  cursor: pointer;
  padding: 8px 12px;
  border-radius: 4px;
  transition: 0.3s;
}
.dropdown button:hover {
  border-color: #c5c5b6;
}
.dropdown-content {
  display: none;
  position: absolute;
  top: 38px;
  left: 0;
  background-color: #fffdf6;
  border: 1px solid #ccc;
  border-radius: 8px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.15);
  z-index: 10;
  padding: 15px;
  min-width: 200px;
}
.dropdown.show .dropdown-content {
  display: block;
}
.dropdown-content label {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 15px;
  margin-bottom: 8px;
}
.dropdown-content input[type="checkbox"], 
.dropdown-content input[type="number"] {
  cursor: pointer;
}
.dropdown-content input[type="number"] {
  width: 70px;
  padding: 4px;
  border: 1px solid #999;
  border-radius: 4px;
  margin-left: 5px;
}
.dropdown-content select {
  width: 100%;
  padding: 8px;
  font-size: 15px;
  border-radius: 4px;
  border: 1px solid #aaa;
}
.product-grid {
  display: flex;
  gap: 40px;
  flex-wrap: wrap;
}
.product {
  width: 28%;
  background-color: #fffdf7;
  border-radius: 8px;
  overflow: hidden;
  transition: 0.3s;
}
.product:hover {
  box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}
.product img {
  width: 100%;
  height: 230px;
  object-fit: cover;
}
.product h3 {
  font-size: 17px;
  margin: 12px 15px 4px;
  color: #3a3a2a;
}
.product p {
  margin: 0 15px 15px;
  color: #3a3a2a;
  font-weight: 500;
}
.whatsapp {
  position: fixed;
  bottom: 25px;
  right: 25px;
  background-color: #25d366;
  color: white;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 28px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  cursor: pointer;
  text-decoration: none;
}
.whatsapp:hover {
  background-color: #20b358;
}
@media (max-width: 900px) {
  .product {
    width: 45%;
  }
}
@media (max-width: 600px) {
  body { padding: 0 20px; }
  .product {
    width: 100%;
  }
}
</style>
</head>
<body>

<h1>Productos</h1>

<div class="filters">
  <div class="filters-left">
    <span style="font-weight:500;">Filtrar:</span>

    <div class="dropdown" id="dispDropdown">
      <button>Disponibilidad ▾</button>
      <div class="dropdown-content">
        <label><input type="checkbox" id="enExistencia" checked> En existencia (3)</label>
        <label style="color:#999;"><input type="checkbox" id="agotado" disabled> Agotado (0)</label>
      </div>
    </div>

    <div class="dropdown" id="precioDropdown">
      <button>Precio ▾</button>
      <div class="dropdown-content">
        <p style="font-size:14px; margin-bottom:8px;">El precio más alto es $32.000,00 <a href="#" id="resetPrecio" style="float:right;">Restablecer</a></p>
        <div style="display:flex; align-items:center; gap:10px;">
          <span>$</span><input type="number" id="precioMin" placeholder="De">
          <span>$</span><input type="number" id="precioMax" placeholder="Para">
        </div>
      </div>
    </div>
  </div>

  <div class="filters-right">
    <span style="font-weight:500;">Ordenar por:</span>
    <div class="dropdown" id="ordenDropdown">
      <button id="ordenBtn">Alfabéticamente, A-Z ▾</button>
      <div class="dropdown-content">
        <select id="ordenSelect">
          <option value="az">Alfabéticamente, A-Z</option>
          <option value="za">Alfabéticamente, Z-A</option>
          <option value="menor">Precio, menor a mayor</option>
          <option value="mayor">Precio, mayor a menor</option>
          <option value="fechaAntigua">Fecha: antiguo(a) a reciente</option>
          <option value="fechaReciente">Fecha: reciente a antiguo(a)</option>
        </select>
      </div>
    </div>
    <span id="contador">3 productos</span>
  </div>
</div>

<div class="product-grid" id="productGrid">
  <div class="product" data-precio="32000" data-disponible="true" data-fecha="2024-05-01">
    <img src="https://upload.wikimedia.org/wikipedia/commons/3/30/Chicken_eggs_basket.jpg" alt="Huevos">
    <h3>Cubeta de Huevos</h3>
    <p>$32.000,00 COP</p>
  </div>

  <div class="product" data-precio="30000" data-disponible="true" data-fecha="2024-07-15">
    <img src="https://upload.wikimedia.org/wikipedia/commons/2/2f/Honey_jar.jpg" alt="Miel natural">
    <h3>Miel natural</h3>
    <p>$30.000,00 COP</p>
  </div>

  <div class="product" data-precio="22000" data-disponible="true" data-fecha="2024-03-20">
    <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Free_range_chickens.jpg" alt="Pollo de campo">
    <h3>Pollo de campo</h3>
    <p>$22.000,00 COP</p>
  </div>
</div>

<a href="https://wa.me/573001112233" target="_blank" class="whatsapp">
  <i class="fa-brands fa-whatsapp"></i>
</a>

<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/js/all.min.js"></script>
<script>
const dropdowns = document.querySelectorAll('.dropdown');
dropdowns.forEach(d => {
  d.querySelector('button').addEventListener('click', () => {
    d.classList.toggle('show');
    dropdowns.forEach(other => {
      if (other !== d) other.classList.remove('show');
    });
  });
});
window.addEventListener('click', e => {
  if (!e.target.closest('.dropdown')) dropdowns.forEach(d => d.classList.remove('show'));
});

const grid = document.getElementById('productGrid');
const contador = document.getElementById('contador');
const ordenSelect = document.getElementById('ordenSelect');
const precioMin = document.getElementById('precioMin');
const precioMax = document.getElementById('precioMax');
const resetPrecio = document.getElementById('resetPrecio');

function actualizarProductos() {
  const productos = Array.from(grid.children);
  const min = precioMin.value ? parseInt(precioMin.value) : 0;
  const max = precioMax.value ? parseInt(precioMax.value) : Infinity;
  const disp = document.getElementById('enExistencia').checked;

  let visibles = productos.filter(p => {
    const precio = parseInt(p.dataset.precio);
    const disponible = p.dataset.disponible === 'true';
    return precio >= min && precio <= max && (!disp || disponible);
  });

  const orden = ordenSelect.value;
  visibles.sort((a,b)=>{
    if(orden==="az") return a.querySelector("h3").textContent.localeCompare(b.querySelector("h3").textContent);
    if(orden==="za") return b.querySelector("h3").textContent.localeCompare(a.querySelector("h3").textContent);
    if(orden==="menor") return a.dataset.precio - b.dataset.precio;
    if(orden==="mayor") return b.dataset.precio - a.dataset.precio;
    if(orden==="fechaAntigua") return new Date(a.dataset.fecha) - new Date(b.dataset.fecha);
    if(orden==="fechaReciente") return new Date(b.dataset.fecha) - new Date(a.dataset.fecha);
  });

  grid.innerHTML = "";
  visibles.forEach(v=>grid.appendChild(v));
  contador.textContent = visibles.length + " producto" + (visibles.length !== 1 ? "s" : "");
}

ordenSelect.addEventListener('change', actualizarProductos);
precioMin.addEventListener('input', actualizarProductos);
precioMax.addEventListener('input', actualizarProductos);
resetPrecio.addEventListener('click', e => {
  e.preventDefault();
  precioMin.value = "";
  precioMax.value = "";
  actualizarProductos();
});
document.getElementById('enExistencia').addEventListener('change', actualizarProductos);

actualizarProductos();
</script>
</body>
</html>
